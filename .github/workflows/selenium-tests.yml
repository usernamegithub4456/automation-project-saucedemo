name: Selenium Windows CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  selenium-test:
    runs-on: windows-latest

    steps:
      # 1Ô∏è‚É£ R√©cup√©rer le code
      - name: Checkout code
        uses: actions/checkout@v3

      # 2Ô∏è‚É£ Installer Python
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # 3Ô∏è‚É£ Installer les d√©pendances Python
      - name: Installer les d√©pendances
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          pip install selenium --upgrade

      # 4Ô∏è‚É£ Cr√©er les dossiers pour Chrome et ChromeDriver
      - name: Pr√©parer les dossiers
        run: |
          mkdir C:\Chrome_Sources\chrome-win64
          mkdir C:\Chrome_Sources\chromedriver-win64

      # 5Ô∏è‚É£ T√©l√©charger Chrome et ChromeDriver depuis Drive
      - name: T√©l√©charger Chrome et ChromeDriver
        run: |
          Invoke-WebRequest "https://drive.google.com/uc?export=download&id=1Y-pLJrNN-skjDN-OY7C0a256dhU4T-Sg" -OutFile "C:\Chrome_Sources\chrome-win64\chrome.exe"
          Invoke-WebRequest "https://drive.google.com/uc?export=download&id=1h9R463OteoDQNYzWrHkXAcXWoDnWv1h8" -OutFile "C:\Chrome_Sources\chromedriver-win64\chromedriver.exe"

          # V√©rifier que les fichiers sont bien t√©l√©charg√©s
          dir C:\Chrome_Sources\chrome-win64
          dir C:\Chrome_Sources\chromedriver-win64

      # 6Ô∏è‚É£ Lancer le script Selenium
      - name: Ex√©cuter Selenium
        run: python selenium2_test.py


      - name: üß™ Ex√©cuter le script Selenium
        run: python selenium2_test.py
